package repository

import (
	"kel1-stockbite-projects/models"
	"kel1-stockbite-projects/utils"

	"github.com/jmoiron/sqlx"
	_ "github.com/lib/pq"
)

type OrderRepository interface {
	GetByName(name string) (models.Stocks, error)
	
	
	
	UpdateStockUser(quantity int, userId string, stockId string) error
	

	GetStockPriceById(stockId string) (int, error)
	
}

type orderRepository struct {
	db *sqlx.DB
}





func (s *orderRepository) 	GetStockPriceById(stockId string) (int, error) {
	var price int


	err := s.db.Get(&price, utils.GET_STOCK_PRICE_BY_ID, stockId)

	if err != nil {
		return 0, err
	}

	return price, nil
}









func NewOrderRepository(db *sqlx.DB) OrderRepository {
	return &orderRepository{
		db: db,
	}
}
